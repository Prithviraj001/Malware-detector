using System;
using System.Windows;
using System.Windows.Shapes;
using System.IO;
using System.Windows.Forms;

namespace Progress
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            var item = new TreeNode();


        }
        private void GetDirectories(DirectoryInfo[] subDirs, TreeNode nodeToAddTo)
        {
            TreeNode aNode;
            DirectoryInfo[] subSubDirs;

            foreach (DirectoryInfo subdir in subDirs)
            {
                aNode = new TreeNode(subdir.Name, 0, 0);
                aNode.Tag = subdir;
                aNode.ImageKey = "folder";

                subSubDirs = subdir.GetDirectories();
                if (subSubDirs.Length != 0)
                    GetDirectories(subSubDirs, aNode);

                nodeToAddTo.Nodes.Add(aNode);
            }
        }
        private void PopulateTreeView()
        {
            TreeNode rootNode;

            DirectoryInfo info = new DirectoryInfo(@"e\:");

            if (info.Exists)
            {
                rootNode = new TreeNode(info.Name);
                rootNode.Tag = info;
                GetDirectories(info.GetDirectories(), rootNode);
                treeView1.Items.Add(rootNode);
            }

        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            PopulateTreeView();

            // MessageBox.Show(dr);
        }
    }
    
}
